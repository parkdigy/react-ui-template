import { useLocation, useNavigate } from 'react-router';

export const RootLayoutAppInitializer = () => {
  /********************************************************************************************************************
   * Use
   * ******************************************************************************************************************/

  const navigate = useNavigate();
  const location = useLocation();

  /********************************************************************************************************************
   * LayoutEffect
   * ******************************************************************************************************************/

  useLayoutEffect(() => {
    g.nav.setNavigate(navigate);
  }, [navigate]);

  /********************************************************************************************************************
   * Effect
   * ******************************************************************************************************************/

  useEffect(() => {
    g.nav.setLocation(location);
  }, [location]);

  useEffect(() => {
    g.browser.scrollToTop(g.nav.getScrollTopPos());
    g.nav.setScrollTopPos(0);
  }, [location.pathname, location.search, location.hash]);

  /********************************************************************************************************************
   * Render
   * ******************************************************************************************************************/

  return null;
};

export default RootLayoutAppInitializer;
