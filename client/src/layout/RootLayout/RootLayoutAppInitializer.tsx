import { useLocation, useNavigate } from 'react-router';
import app from '@app';

export const RootLayoutAppInitializer = () => {
  /********************************************************************************************************************
   * Use
   * ******************************************************************************************************************/

  const navigate = useNavigate();
  const location = useLocation();

  /********************************************************************************************************************
   * LayoutEffect
   * ******************************************************************************************************************/

  useLayoutEffect(() => {
    __setNavigate(navigate);
  }, [navigate]);

  /********************************************************************************************************************
   * Effect
   * ******************************************************************************************************************/

  useEffect(() => {
    __setLocation(location);
  }, [location]);

  useEffect(() => {
    app.scrollToTop(__getNavigateScrollTopPos());
    __setNavigateScrollTopPos(0);
  }, [location.pathname, location.search, location.hash]);

  /********************************************************************************************************************
   * Render
   * ******************************************************************************************************************/

  return null;
};

export default RootLayoutAppInitializer;
